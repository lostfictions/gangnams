<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Gang Nams</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    /* Based on an example from http://codepen.io/boldfacedesign/pen/EoGgD */

    @font-face {
      font-family: 'Permanent Marker';
      font-style: normal;
      font-weight: 400;
      src: local('Permanent Marker'), local('PermanentMarker'), url('PermanentMarker.woff2') format('woff2'), url('PermanentMarker.ttf') format('truetype');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
    }

    body {
      background: #000;
      color: #fff;
      position: absolute;
      overflow: hidden;
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #wrapper {
      display: flex;
      align-items: center;
      justify-content: center;
      max-width: 600px;
    }

    .victory {
      white-space: nowrap;
      font-family: 'Permanent Marker', cursive;
      font-variant:small-caps;
      transform: skew(-15deg,-15deg);
      padding: 25vmin 20vmin;
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-align: center;
    }

    .victory .xs {
      font-size: 8vmin;
      margin-right: 2vmin;
      vertical-align: 3vmin;
    }

    .victory .sm {
      font-size: 15vmin;
      line-height: 8vmin;
      margin-top: -1vmin;
    }

    .victory .lg {
      white-space: normal;
      display: inherit;
      font-size: 25vmin;
      line-height: 0.8;
      margin-top: -3vmin;
    }

    .helper {
      position: absolute;
      right: 10px;
      bottom: 10px;
    }

    .btn {
      border-radius: 10px;
      font-family: Arial;
      color: #dbdbdb;
      background: #1c1c1c;
      padding: 6px 6px 6px 6px;
      text-decoration: none;
    }

    .btn-sm {
      font-size: 10px;
    }

    .btn-lg {
      font-size: 15px;
    }

  </style>
</head>

<body>
  <div class="helper">
    <a class="btn btn-sm" id="undo" href="#">Undo</a>
    <a class="btn btn-lg" id="another" href="#">Another!</a>
  </div>
  <div id="wrapper">
    <h1 class="victory">
      <span class="xs"></span>
      <span class="sm"></span>
      <span class="lg"></span>
    </h1>
  </div>
</body>

<script src="Please.js"></script>
<script src="bundle.js"></script>
<script>
  var hist = [];

  var xs = document.querySelector('.victory .xs');
  var sm = document.querySelector('.victory .sm');
  var lg = document.querySelector('.victory .lg');

  var styleParent = document.querySelector('.victory');

  var gName = [];
  var col = '';

  function newName() {
    hist.push({ name: gName, col: col })

    gName = gangName();

    //Use the bigger font size if words are missing
    if(gName[2] === '') {
      gName[2] = gName[1];
      gName[1] = gName[0];
      gName[0] = '';
    }
    else if(gName[1] === '') {
      gName[1] = gName[0];
      gName[0] = '';
    }

    col = Please.make_color({saturation: 1});

    xs.innerHTML = gName[0];
    sm.innerHTML = gName[1];
    lg.innerHTML = gName[2];
    setColor(col);
  }

  function undo() {
    if(hist.length <= 1) {
      return;
    }

    var h = hist.pop();
    gName = h.name;
    col = h.col;

    xs.innerHTML = gName[0];
    sm.innerHTML = gName[1];
    lg.innerHTML = gName[2];
    setColor(col);
  }

  function setColor(color) {
    styleParent.style.webkitFilter = 'drop-shadow(1vmin 1vmin 5vmin ' + color + ')';
    styleParent.style.backgroundImage = 'linear-gradient(' + color + ' 40%,  #F9F9F7 70%)';
  }

  var b = document.querySelector('#another');
  b.onclick = function(e) { e.preventDefault(); newName(); };

  var u = document.querySelector('#undo');
  u.onclick = function(e) { e.preventDefault(); undo(); };

  newName();
</script>

</html>
